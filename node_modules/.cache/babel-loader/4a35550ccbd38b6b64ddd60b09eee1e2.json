{"ast":null,"code":"export function buildVideoCategoriesRequest() {\n  return buildApiRequest('GET', '/youtube/v3/videoCategories', {\n    'part': 'snippet',\n    'regionCode': 'US'\n  }, null);\n}\nexport function buildMostPopularVideosRequest(amount = 12, loadDescription = false, nextPageToken, videoCategoryId = null) {\n  let fields = 'nextPageToken,prevPageToken,items(contentDetails/duration,id,snippet(channelId,channelTitle,publishedAt,thumbnails/medium,title),statistics/viewCount),pageInfo(totalResults)';\n\n  if (loadDescription) {\n    fields += ',items/snippet/description';\n  }\n\n  return buildApiRequest('GET', '/youtube/v3/videos', {\n    part: 'snippet,statistics,contentDetails',\n    chart: 'mostPopular',\n    maxResults: amount,\n    regionCode: 'US',\n    pageToken: nextPageToken,\n    fields,\n    videoCategoryId\n  }, null);\n}\nexport function buildVideoDetailRequest(videoId) {\n  return buildApiRequest('GET', '/youtube/v3/videos', {\n    part: 'snippet,statistics,contentDetails',\n    id: videoId,\n    fields: 'kind,items(contentDetails/duration,id,snippet(channelId,channelTitle,description,publishedAt,thumbnails/medium,title),statistics)'\n  }, null);\n}\nexport function buildChannelRequest(channelId) {\n  return buildApiRequest('GET', '/youtube/v3/channels', {\n    part: 'snippet,statistics',\n    id: channelId,\n    fields: 'kind,items(id,snippet(description,thumbnails/medium,title),statistics/subscriberCount)'\n  }, null);\n}\nexport function buildCommentThreadRequest(videoId, nextPageToken) {\n  return buildApiRequest('GET', '/youtube/v3/commentThreads', {\n    part: 'id,snippet',\n    pageToken: nextPageToken,\n    videoId\n  }, null);\n}\nexport function buildSearchRequest(query, nextPageToken, amount = 12) {\n  return buildApiRequest('GET', '/youtube/v3/search', {\n    part: 'id,snippet',\n    q: query,\n    type: 'video',\n    pageToken: nextPageToken,\n    maxResults: amount\n  }, null);\n}\nexport function buildRelatedVideosRequest(videoId, amountRelatedVideos = 12) {\n  return buildApiRequest('GET', '/youtube/v3/search', {\n    part: 'snippet',\n    type: 'video',\n    maxResults: amountRelatedVideos,\n    relatedToVideoId: videoId\n  }, null);\n}\n/*\n  Util - Youtube API boilerplate code\n */\n\nexport function buildApiRequest(requestMethod, path, params, properties) {\n  params = removeEmptyParams(params);\n  let request;\n\n  if (properties) {\n    let resource = createResource(properties);\n    request = window.gapi.client.request({\n      'body': resource,\n      'method': requestMethod,\n      'path': path,\n      'params': params\n    });\n  } else {\n    request = window.gapi.client.request({\n      'method': requestMethod,\n      'path': path,\n      'params': params\n    });\n  }\n\n  return request;\n}\n\nfunction removeEmptyParams(params) {\n  for (var p in params) {\n    if (!params[p] || params[p] === 'undefined') {\n      delete params[p];\n    }\n  }\n\n  return params;\n}\n\nfunction createResource(properties) {\n  var resource = {};\n  var normalizedProps = properties;\n\n  for (var p in properties) {\n    var value = properties[p];\n\n    if (p && p.substr(-2, 2) === '[]') {\n      var adjustedName = p.replace('[]', '');\n\n      if (value) {\n        normalizedProps[adjustedName] = value.split(',');\n      }\n\n      delete normalizedProps[p];\n    }\n  }\n\n  for (var prop in normalizedProps) {\n    // Leave properties that don't have values out of inserted resource.\n    if (normalizedProps.hasOwnProperty(prop) && normalizedProps[prop]) {\n      var propArray = prop.split('.');\n      var ref = resource;\n\n      for (var pa = 0; pa < propArray.length; pa++) {\n        var key = propArray[pa];\n\n        if (pa === propArray.length - 1) {\n          ref[key] = normalizedProps[prop];\n        } else {\n          ref = ref[key] = ref[key] || {};\n        }\n      }\n    }\n  }\n\n  return resource;\n}","map":{"version":3,"sources":["/Users/joan/Documents/Drive/Projects/punithargal.org/api/frontend/src/store/api/youtube-api.js"],"names":["buildVideoCategoriesRequest","buildApiRequest","buildMostPopularVideosRequest","amount","loadDescription","nextPageToken","videoCategoryId","fields","part","chart","maxResults","regionCode","pageToken","buildVideoDetailRequest","videoId","id","buildChannelRequest","channelId","buildCommentThreadRequest","buildSearchRequest","query","q","type","buildRelatedVideosRequest","amountRelatedVideos","relatedToVideoId","requestMethod","path","params","properties","removeEmptyParams","request","resource","createResource","window","gapi","client","p","normalizedProps","value","substr","adjustedName","replace","split","prop","hasOwnProperty","propArray","ref","pa","length","key"],"mappings":"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","sourcesContent":["export function buildVideoCategoriesRequest() {\n  return buildApiRequest('GET',\n    '/youtube/v3/videoCategories',\n    {\n      'part': 'snippet',\n      'regionCode': 'US'\n    }, null);\n}\n\nexport function buildMostPopularVideosRequest(amount = 12, loadDescription = false, nextPageToken, videoCategoryId = null) {\n  let fields = 'nextPageToken,prevPageToken,items(contentDetails/duration,id,snippet(channelId,channelTitle,publishedAt,thumbnails/medium,title),statistics/viewCount),pageInfo(totalResults)';\n  if (loadDescription) {\n    fields += ',items/snippet/description';\n  }\n  return buildApiRequest('GET',\n    '/youtube/v3/videos',\n    {\n      part: 'snippet,statistics,contentDetails',\n      chart: 'mostPopular',\n      maxResults: amount,\n      regionCode: 'US',\n      pageToken: nextPageToken,\n      fields,\n      videoCategoryId,\n    }, null);\n}\n\nexport function buildVideoDetailRequest(videoId) {\n  return buildApiRequest('GET',\n    '/youtube/v3/videos',\n    {\n      part: 'snippet,statistics,contentDetails',\n      id: videoId,\n      fields: 'kind,items(contentDetails/duration,id,snippet(channelId,channelTitle,description,publishedAt,thumbnails/medium,title),statistics)'\n    }, null);\n}\n\nexport function buildChannelRequest(channelId) {\n  return buildApiRequest('GET',\n    '/youtube/v3/channels',\n    {\n      part: 'snippet,statistics',\n      id: channelId,\n      fields: 'kind,items(id,snippet(description,thumbnails/medium,title),statistics/subscriberCount)'\n    }, null);\n}\n\nexport function buildCommentThreadRequest(videoId, nextPageToken) {\n  return buildApiRequest('GET',\n    '/youtube/v3/commentThreads',\n    {\n      part: 'id,snippet',\n      pageToken: nextPageToken,\n      videoId,\n    }, null);\n}\n\nexport function buildSearchRequest(query, nextPageToken, amount = 12) {\n  return buildApiRequest('GET',\n    '/youtube/v3/search',\n    {\n      part: 'id,snippet',\n      q: query,\n      type: 'video',\n      pageToken: nextPageToken,\n      maxResults: amount,\n    }, null);\n}\n\nexport function buildRelatedVideosRequest(videoId, amountRelatedVideos = 12) {\n  return buildApiRequest('GET',\n    '/youtube/v3/search',\n    {\n      part: 'snippet',\n      type: 'video',\n      maxResults: amountRelatedVideos,\n      relatedToVideoId: videoId,\n    }, null);\n}\n\n/*\n  Util - Youtube API boilerplate code\n */\nexport function buildApiRequest(requestMethod, path, params, properties) {\n  params = removeEmptyParams(params);\n  let request;\n  if (properties) {\n    let resource = createResource(properties);\n    request = window.gapi.client.request({\n      'body': resource,\n      'method': requestMethod,\n      'path': path,\n      'params': params\n    });\n  } else {\n    request = window.gapi.client.request({\n      'method': requestMethod,\n      'path': path,\n      'params': params\n    });\n  }\n  return request;\n}\n\nfunction removeEmptyParams(params) {\n  for (var p in params) {\n    if (!params[p] || params[p] === 'undefined') {\n      delete params[p];\n    }\n  }\n  return params;\n}\n\nfunction createResource(properties) {\n  var resource = {};\n  var normalizedProps = properties;\n  for (var p in properties) {\n    var value = properties[p];\n    if (p && p.substr(-2, 2) === '[]') {\n      var adjustedName = p.replace('[]', '');\n      if (value) {\n        normalizedProps[adjustedName] = value.split(',');\n      }\n      delete normalizedProps[p];\n    }\n  }\n  for (var prop in normalizedProps) {\n    // Leave properties that don't have values out of inserted resource.\n    if (normalizedProps.hasOwnProperty(prop) && normalizedProps[prop]) {\n      var propArray = prop.split('.');\n      var ref = resource;\n      for (var pa = 0; pa < propArray.length; pa++) {\n        var key = propArray[pa];\n        if (pa === propArray.length - 1) {\n          ref[key] = normalizedProps[prop];\n        } else {\n          ref = ref[key] = ref[key] || {};\n        }\n      }\n    }\n  }\n  return resource;\n}"]},"metadata":{},"sourceType":"module"}
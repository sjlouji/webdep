{"ast":null,"code":"import { SEARCH_FOR_VIDEOS } from '../actions/search';\nimport { REQUEST, SUCCESS } from '../actions';\nexport default function (state = {}, action) {\n  switch (action.type) {\n    case SEARCH_FOR_VIDEOS[SUCCESS]:\n      return reduceSearchForVideos(action.response, action.searchQuery, state);\n\n    case SEARCH_FOR_VIDEOS[REQUEST]:\n      // delete the previous search because otherwise our component flickers and shows the\n      // previous search results before it shows\n      return action.nextPageToken ? state : {};\n\n    default:\n      return state;\n  }\n}\n\nfunction reduceSearchForVideos(response, searchQuery, prevState) {\n  let searchResults = response.items.map(item => ({ ...item,\n    id: item.id.videoId\n  }));\n\n  if (prevState.query === searchQuery) {\n    const prevResults = prevState.results || [];\n    searchResults = prevResults.concat(searchResults);\n  }\n\n  return {\n    totalResults: response.pageInfo.totalResults,\n    nextPageToken: response.nextPageToken,\n    query: searchQuery,\n    results: searchResults\n  };\n}\n/*\n  Selectors\n */\n\n\nexport const getSearchResults = state => state.search.results;\nexport const getSearchNextPageToken = state => state.search.nextPageToken;","map":{"version":3,"sources":["/Users/joan/Documents/Drive/Projects/punithargal.org/api/frontend/src/store/reducers/search.js"],"names":["SEARCH_FOR_VIDEOS","REQUEST","SUCCESS","state","action","type","reduceSearchForVideos","response","searchQuery","nextPageToken","prevState","searchResults","items","map","item","id","videoId","query","prevResults","results","concat","totalResults","pageInfo","getSearchResults","search","getSearchNextPageToken"],"mappings":"AAAA,SAAQA,iBAAR,QAAgC,mBAAhC;AACA,SAAQC,OAAR,EAAiBC,OAAjB,QAA+B,YAA/B;AAEA,eAAe,UAAUC,KAAK,GAAG,EAAlB,EAAsBC,MAAtB,EAA8B;AAC3C,UAAQA,MAAM,CAACC,IAAf;AACE,SAAKL,iBAAiB,CAACE,OAAD,CAAtB;AACE,aAAOI,qBAAqB,CAACF,MAAM,CAACG,QAAR,EAAkBH,MAAM,CAACI,WAAzB,EAAsCL,KAAtC,CAA5B;;AACF,SAAKH,iBAAiB,CAACC,OAAD,CAAtB;AACE;AACA;AACA,aAAOG,MAAM,CAACK,aAAP,GAAuBN,KAAvB,GAA+B,EAAtC;;AACF;AACE,aAAOA,KAAP;AARJ;AAUD;;AAED,SAASG,qBAAT,CAA+BC,QAA/B,EAAyCC,WAAzC,EAAsDE,SAAtD,EAAiE;AAC/D,MAAIC,aAAa,GAAGJ,QAAQ,CAACK,KAAT,CAAeC,GAAf,CAAmBC,IAAI,KAAK,EAAC,GAAGA,IAAJ;AAAUC,IAAAA,EAAE,EAAED,IAAI,CAACC,EAAL,CAAQC;AAAtB,GAAL,CAAvB,CAApB;;AACA,MAAIN,SAAS,CAACO,KAAV,KAAoBT,WAAxB,EAAqC;AACnC,UAAMU,WAAW,GAAGR,SAAS,CAACS,OAAV,IAAqB,EAAzC;AACAR,IAAAA,aAAa,GAAGO,WAAW,CAACE,MAAZ,CAAmBT,aAAnB,CAAhB;AACD;;AACD,SAAO;AACLU,IAAAA,YAAY,EAAEd,QAAQ,CAACe,QAAT,CAAkBD,YAD3B;AAELZ,IAAAA,aAAa,EAAEF,QAAQ,CAACE,aAFnB;AAGLQ,IAAAA,KAAK,EAAET,WAHF;AAILW,IAAAA,OAAO,EAAER;AAJJ,GAAP;AAMD;AAED;;;;;AAGA,OAAO,MAAMY,gBAAgB,GAAIpB,KAAD,IAAWA,KAAK,CAACqB,MAAN,CAAaL,OAAjD;AACP,OAAO,MAAMM,sBAAsB,GAAItB,KAAD,IAAWA,KAAK,CAACqB,MAAN,CAAaf,aAAvD","sourcesContent":["import {SEARCH_FOR_VIDEOS} from '../actions/search';\nimport {REQUEST, SUCCESS} from '../actions';\n\nexport default function (state = {}, action) {\n  switch (action.type) {\n    case SEARCH_FOR_VIDEOS[SUCCESS]:\n      return reduceSearchForVideos(action.response, action.searchQuery, state);\n    case SEARCH_FOR_VIDEOS[REQUEST]:\n      // delete the previous search because otherwise our component flickers and shows the\n      // previous search results before it shows\n      return action.nextPageToken ? state : {};\n    default:\n      return state;\n  }\n}\n\nfunction reduceSearchForVideos(response, searchQuery, prevState) {\n  let searchResults = response.items.map(item => ({...item, id: item.id.videoId}));\n  if (prevState.query === searchQuery) {\n    const prevResults = prevState.results || [];\n    searchResults = prevResults.concat(searchResults);\n  }\n  return {\n    totalResults: response.pageInfo.totalResults,\n    nextPageToken: response.nextPageToken,\n    query: searchQuery,\n    results: searchResults\n  };\n}\n\n/*\n  Selectors\n */\nexport const getSearchResults = (state) => state.search.results;\nexport const getSearchNextPageToken = (state) => state.search.nextPageToken;\n"]},"metadata":{},"sourceType":"module"}
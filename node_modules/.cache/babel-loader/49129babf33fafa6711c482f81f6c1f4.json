{"ast":null,"code":"import _objectSpread from\"/Users/joan/Documents/Drive/Projects/punithargal.org/api/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import{SEARCH_FOR_VIDEOS}from'../actions/search';import{REQUEST,SUCCESS}from'../actions';export default function(){var state=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var action=arguments.length>1?arguments[1]:undefined;switch(action.type){case SEARCH_FOR_VIDEOS[SUCCESS]:return reduceSearchForVideos(action.response,action.searchQuery,state);case SEARCH_FOR_VIDEOS[REQUEST]:// delete the previous search because otherwise our component flickers and shows the\n// previous search results before it shows\nreturn action.nextPageToken?state:{};default:return state;}}function reduceSearchForVideos(response,searchQuery,prevState){var searchResults=response.items.map(function(item){return _objectSpread(_objectSpread({},item),{},{id:item.id.videoId});});if(prevState.query===searchQuery){var prevResults=prevState.results||[];searchResults=prevResults.concat(searchResults);}return{totalResults:response.pageInfo.totalResults,nextPageToken:response.nextPageToken,query:searchQuery,results:searchResults};}/*\n  Selectors\n */export var getSearchResults=function getSearchResults(state){return state.search.results;};export var getSearchNextPageToken=function getSearchNextPageToken(state){return state.search.nextPageToken;};","map":{"version":3,"sources":["/Users/joan/Documents/Drive/Projects/punithargal.org/api/frontend/src/store/reducers/search.js"],"names":["SEARCH_FOR_VIDEOS","REQUEST","SUCCESS","state","action","type","reduceSearchForVideos","response","searchQuery","nextPageToken","prevState","searchResults","items","map","item","id","videoId","query","prevResults","results","concat","totalResults","pageInfo","getSearchResults","search","getSearchNextPageToken"],"mappings":"uLAAA,OAAQA,iBAAR,KAAgC,mBAAhC,CACA,OAAQC,OAAR,CAAiBC,OAAjB,KAA+B,YAA/B,CAEA,cAAe,WAA8B,IAApBC,CAAAA,KAAoB,2DAAZ,EAAY,IAARC,CAAAA,MAAQ,2CAC3C,OAAQA,MAAM,CAACC,IAAf,EACE,IAAKL,CAAAA,iBAAiB,CAACE,OAAD,CAAtB,CACE,MAAOI,CAAAA,qBAAqB,CAACF,MAAM,CAACG,QAAR,CAAkBH,MAAM,CAACI,WAAzB,CAAsCL,KAAtC,CAA5B,CACF,IAAKH,CAAAA,iBAAiB,CAACC,OAAD,CAAtB,CACE;AACA;AACA,MAAOG,CAAAA,MAAM,CAACK,aAAP,CAAuBN,KAAvB,CAA+B,EAAtC,CACF,QACE,MAAOA,CAAAA,KAAP,CARJ,CAUD,CAED,QAASG,CAAAA,qBAAT,CAA+BC,QAA/B,CAAyCC,WAAzC,CAAsDE,SAAtD,CAAiE,CAC/D,GAAIC,CAAAA,aAAa,CAAGJ,QAAQ,CAACK,KAAT,CAAeC,GAAf,CAAmB,SAAAC,IAAI,wCAASA,IAAT,MAAeC,EAAE,CAAED,IAAI,CAACC,EAAL,CAAQC,OAA3B,IAAvB,CAApB,CACA,GAAIN,SAAS,CAACO,KAAV,GAAoBT,WAAxB,CAAqC,CACnC,GAAMU,CAAAA,WAAW,CAAGR,SAAS,CAACS,OAAV,EAAqB,EAAzC,CACAR,aAAa,CAAGO,WAAW,CAACE,MAAZ,CAAmBT,aAAnB,CAAhB,CACD,CACD,MAAO,CACLU,YAAY,CAAEd,QAAQ,CAACe,QAAT,CAAkBD,YAD3B,CAELZ,aAAa,CAAEF,QAAQ,CAACE,aAFnB,CAGLQ,KAAK,CAAET,WAHF,CAILW,OAAO,CAAER,aAJJ,CAAP,CAMD,CAED;;GAGA,MAAO,IAAMY,CAAAA,gBAAgB,CAAG,QAAnBA,CAAAA,gBAAmB,CAACpB,KAAD,QAAWA,CAAAA,KAAK,CAACqB,MAAN,CAAaL,OAAxB,EAAzB,CACP,MAAO,IAAMM,CAAAA,sBAAsB,CAAG,QAAzBA,CAAAA,sBAAyB,CAACtB,KAAD,QAAWA,CAAAA,KAAK,CAACqB,MAAN,CAAaf,aAAxB,EAA/B","sourcesContent":["import {SEARCH_FOR_VIDEOS} from '../actions/search';\nimport {REQUEST, SUCCESS} from '../actions';\n\nexport default function (state = {}, action) {\n  switch (action.type) {\n    case SEARCH_FOR_VIDEOS[SUCCESS]:\n      return reduceSearchForVideos(action.response, action.searchQuery, state);\n    case SEARCH_FOR_VIDEOS[REQUEST]:\n      // delete the previous search because otherwise our component flickers and shows the\n      // previous search results before it shows\n      return action.nextPageToken ? state : {};\n    default:\n      return state;\n  }\n}\n\nfunction reduceSearchForVideos(response, searchQuery, prevState) {\n  let searchResults = response.items.map(item => ({...item, id: item.id.videoId}));\n  if (prevState.query === searchQuery) {\n    const prevResults = prevState.results || [];\n    searchResults = prevResults.concat(searchResults);\n  }\n  return {\n    totalResults: response.pageInfo.totalResults,\n    nextPageToken: response.nextPageToken,\n    query: searchQuery,\n    results: searchResults\n  };\n}\n\n/*\n  Selectors\n */\nexport const getSearchResults = (state) => state.search.results;\nexport const getSearchNextPageToken = (state) => state.search.nextPageToken;\n"]},"metadata":{},"sourceType":"module"}
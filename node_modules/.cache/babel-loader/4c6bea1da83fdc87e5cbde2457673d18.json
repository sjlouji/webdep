{"ast":null,"code":"'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.eventTypes = exports.EventCalendar = undefined;\n\nvar _createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _moment = require('moment');\n\nvar _moment2 = _interopRequireDefault(_moment);\n\nvar _reactResizeDetector = require('react-resize-detector');\n\nvar _reactResizeDetector2 = _interopRequireDefault(_reactResizeDetector);\n\nvar _calendar = require('../components/calendar');\n\nvar _calendar2 = _interopRequireDefault(_calendar);\n\nvar _strings = require('../resources/values/strings');\n\nvar _utilities = require('../resources/utilities');\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n}\n\nvar Calendar = function (_Component) {\n  _inherits(Calendar, _Component);\n\n  function Calendar(props) {\n    _classCallCheck(this, Calendar);\n\n    var _this = _possibleConstructorReturn(this, (Calendar.__proto__ || Object.getPrototypeOf(Calendar)).call(this, props));\n\n    _this.state = {\n      calendarList: null,\n      isLoading: true,\n      month: 0,\n      year: 0,\n      numDaysInMonth: 0,\n      isMobile: false,\n      frameRef: _react2.default.createRef()\n    };\n    _this.initCalendarList = _this.initCalendarList.bind(_this);\n    _this.loadEvent = _this.loadEvent.bind(_this);\n    _this.loadCalendarList = _this.loadCalendarList.bind(_this);\n    return _this;\n  }\n  /*\r\n   * Load events and config props from the parent component. Events here are copied so that when we determine the\r\n   * event type in the loadCalendarList function, we do not mutate the passed events which may have other uses in\r\n   * their program.\r\n   *\r\n   * parseConfig checks for missing data members such as colors or weekdays, and injects default values for those\r\n   * fields into the config object. This ensures calendar events will always be colored.\r\n   */\n\n\n  _createClass(Calendar, [{\n    key: 'componentDidMount',\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      var _props = this.props,\n          items = _props.items,\n          config = _props.config,\n          month = _props.month,\n          year = _props.year; // Create deep copy so that user input is not mutated.\n\n      var eventsCopy = JSON.parse(JSON.stringify(items)); // Inject defaults if key is not overwritten.\n\n      (0, _utilities.parseConfig)(config);\n      var safeMonth = month ? month : new Date().getMonth() + 1;\n      var safeYear = year ? year : new Date().getFullYear();\n      this.initCalendarList(safeMonth, safeYear, function () {\n        _this2.loadCalendarList(eventsCopy, safeMonth, safeYear);\n      });\n    }\n  }, {\n    key: 'componentWillReceiveProps',\n    value: function componentWillReceiveProps(nextProps, nextContext) {\n      var _this3 = this;\n\n      if ((nextProps.month !== this.props.month || nextProps.year !== this.props.year) && nextProps.items) {\n        var items = nextProps.items,\n            config = nextProps.config,\n            month = nextProps.month,\n            year = nextProps.year; // Create deep copy so that user input is not mutated.\n\n        var eventsCopy = JSON.parse(JSON.stringify(items)); // Inject defaults if key is not overwritten.\n\n        (0, _utilities.parseConfig)(config);\n        var safeMonth = month ? month : new Date().getMonth() + 1;\n        var safeYear = year ? year : new Date().getFullYear();\n        this.initCalendarList(safeMonth, safeYear, function () {\n          _this3.loadCalendarList(eventsCopy, safeMonth, safeYear);\n        });\n      }\n    }\n    /*\r\n     * Initialize empty calendar list of a given length. This step is important because it allows us to use unshift\r\n     * functions to load our events without worrying about the calendar index being undefined.\r\n     *\r\n     * This is the starting point of the calendar, and everything flows from here.\r\n     * initCalendarList -> loadCalendarList -> loadEvent -> calendarList passed to presentational components and displayed.\r\n     *\r\n     * @param callBack: This callBack is the loadCalendarList function. Once the calendar has been initialized,\r\n     *                  we can begin loading it.\r\n     */\n\n  }, {\n    key: 'initCalendarList',\n    value: function initCalendarList(month, year, callBack) {\n      var numDaysInMonth = [31, year % 4 === 0 ? 29 : 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31];\n      var calendarList = [];\n      var numDays = numDaysInMonth[month - 1];\n      var offset = (0, _moment2.default)(year + '-' + month + '-01', 'YYYY-M-DD').day();\n      var numTiles = offset + numDays > 35 ? 35 + 7 : 35;\n\n      for (var i = 0; i < numTiles; i++) {\n        calendarList[i] = [];\n      }\n\n      this.setState({\n        calendarList: calendarList,\n        numDaysInMonth: numDaysInMonth\n      }, function () {\n        return callBack();\n      });\n    }\n    /* Sort and iterate over copied events, assigning types and determining their place on the calendar.\r\n     * numDays, offset, and most of the variables below are used to calculate the event's position from it's start\r\n     * and end dates.\r\n     */\n\n  }, {\n    key: 'loadCalendarList',\n    value: function loadCalendarList(events, month, year) {\n      var _this4 = this; // Six weeks, four weeks = selected month, one week for months before and after - 42 days total.\n      // Group events on the same day, each element in array represents one day.\n\n\n      var _state = this.state,\n          calendarList = _state.calendarList,\n          numDaysInMonth = _state.numDaysInMonth;\n      var config = this.props.config;\n      if (!config) return null;\n      var firstDateStart = null,\n          firstDateEnd = null;\n      var secondDateStart = null,\n          secondDateEnd = null;\n      var firstDateCreated = null,\n          secondDateCreated = null;\n      var numDays = numDaysInMonth[month - 1];\n      var numDaysInLastMonth = numDaysInMonth[month - 2 >= 0 ? month - 2 : 11];\n      var numDaysInNextMonth = numDaysInMonth[month > 11 ? 0 : month];\n      var offset = (0, _moment2.default)(year + '-' + month + '-01', \"YYYY-M-DD\").day();\n      var numTiles = offset + numDays > 35 ? 35 + 7 : 35;\n      var argsObject = {\n        numDays: numDays,\n        numDaysInMonth: numDaysInMonth,\n        numDaysInLastMonth: numDaysInLastMonth,\n        numDaysInNextMonth: numDaysInNextMonth,\n        offset: offset,\n        month: month,\n        year: year,\n        numTiles: numTiles\n      };\n      events.sort(function (firstEvent, secondEvent) {\n        firstDateCreated = (0, _moment2.default)(firstEvent.created);\n        secondDateCreated = (0, _moment2.default)(secondEvent.created);\n        firstDateStart = (0, _moment2.default)(firstEvent.start, config.dateFormat);\n        firstDateEnd = (0, _moment2.default)(firstEvent.end, config.dateFormat);\n        secondDateStart = (0, _moment2.default)(secondEvent.start, config.dateFormat);\n        secondDateEnd = (0, _moment2.default)(secondEvent.end, config.dateFormat);\n        var args = {\n          firstDateStart: firstDateStart,\n          firstDateEnd: firstDateEnd,\n          secondDateStart: secondDateStart,\n          secondDateEnd: secondDateEnd,\n          month: month,\n          numDaysInMonth: numDaysInMonth\n        };\n        return (0, _utilities.computeDifferences)(firstDateCreated, secondDateCreated, firstEvent, secondEvent, args);\n      });\n      events.map(function (event) {\n        var _parseEvent = (0, _utilities.parseEvent)(event, argsObject, config),\n            parsedDay = _parseEvent.parsedDay,\n            parsedEnd = _parseEvent.parsedEnd,\n            parsedMonth = _parseEvent.parsedMonth,\n            parsedMonthEnd = _parseEvent.parsedMonthEnd,\n            isBelowEventRange = _parseEvent.isBelowEventRange,\n            isAboveEventRange = _parseEvent.isAboveEventRange;\n\n        var parts = {\n          numTiles: numTiles,\n          parsedDay: parsedDay,\n          parsedEnd: parsedEnd,\n          offset: offset,\n          month: month,\n          numDaysInLastMonth: numDaysInLastMonth,\n          numDays: numDays\n        };\n\n        if (!isBelowEventRange || !isAboveEventRange) {\n          for (var i = parsedDay, j = 0; i < parsedEnd; i++, j++) {\n            switch (true) {\n              // Event is multiple days long\n              case Math.abs(parsedEnd - parsedDay) > 1:\n                event.type = _strings.MULTI_DAY_TYPE;\n                break;\n              // Event takes place over a single day\n\n              case parsedMonth === parsedMonthEnd ? Math.abs(parsedEnd - parsedDay) <= 1 : Math.abs(parsedEnd - parsedDay - parsedDay) <= 1:\n                event.type = _strings.SINGLE_DAY_TYPE;\n                break;\n              // If event reaches here, there is likely something wrong with its structure.\n              // Set it as a placeholder so it is less likely to disrupt other events.\n\n              default:\n                event.type = _strings.PLACEHOLDER_TYPE;\n                break;\n            }\n\n            switch (true) {\n              // Event belongs to 'this' month\n              case parsedMonth === month:\n                _this4.loadEvent(event, calendarList, i + offset - 1, parts, j);\n\n                break;\n              // Event belongs to previous month\n\n              case parsedMonth === (month - 1 >= 1 ? month - 1 : 12):\n                _this4.loadEvent(event, calendarList, i - numDaysInLastMonth + offset - 1, parts, j);\n\n                break;\n              // Event belongs to next month\n\n              default:\n                _this4.loadEvent(event, calendarList, numDays + i + offset - 1, parts, j);\n\n                break;\n            }\n          }\n        }\n\n        return 0; // Get rid of warning\n      }); // Perform second pass to reorder placeholder events so that space can be saved.\n\n      (0, _utilities.reorderEvents)({\n        calendarList: calendarList,\n        numDays: numDays,\n        numDaysInMonth: numDaysInMonth,\n        numDaysInLastMonth: numDaysInLastMonth,\n        numDaysInNextMonth: numDaysInNextMonth,\n        offset: offset,\n        month: month,\n        year: year,\n        numTiles: numTiles,\n        config: config\n      });\n      this.setState({\n        calendarList: calendarList,\n        isLoading: false,\n        month: month,\n        year: year\n      });\n    }\n    /* Place event into appropriate spot on calendar, check for vertical overflow, and wrap events that extend past\r\n     * calendar border.\r\n     *\r\n     * This is the last step before the calendarList is passed to the presentational components.\r\n     */\n\n  }, {\n    key: 'loadEvent',\n    value: function loadEvent(event, calendarList, i, parts, j) {\n      var config = this.props.config;\n      var parsedEnd = parts.parsedEnd,\n          numTiles = parts.numTiles;\n      var ranOnce = false;\n\n      if (i >= 0 && i < numTiles && j === 0) {\n        calendarList[i].unshift(event);\n        (0, _utilities.wrapLongEvent)(event, ranOnce, calendarList, parts, i, event, config);\n      } else {\n        var start = (0, _moment2.default)(event.start, config.dateFormat);\n        var end = (0, _moment2.default)(event.end, config.dateFormat);\n\n        if (i >= 0 && i < numTiles) {\n          if (!_strings.wrappingTiles.includes(i - 1)) {\n            calendarList[i].unshift({\n              summary: event.summary,\n              created: event.created,\n              type: _strings.PLACEHOLDER_TYPE,\n              start: {\n                date: start.year() + '-' + (start.month() + 1) + '-' + parsedEnd\n              },\n              end: {\n                date: end.year() + '-' + (end.month() + 1) + '-' + parsedEnd\n              }\n            });\n          }\n        }\n      }\n    }\n    /* Calendar will shrink into mobile mode when the calendar's container is below a certain height or width.\r\n     * Width and height values are determined to be the lowest values possible and still retain calendar integrity.\r\n     */\n\n  }, {\n    key: 'checkParentDimensions',\n    value: function checkParentDimensions(ref) {\n      var width = ref.current.clientWidth;\n      var height = ref.current.clientHeight;\n\n      if (width < 451 || height < 521) {\n        this.setState({\n          isMobile: true\n        });\n      } else {\n        this.setState({\n          isMobile: false\n        });\n      }\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      var _this5 = this;\n\n      var config = this.props.config;\n      var _state2 = this.state,\n          calendarList = _state2.calendarList,\n          isLoading = _state2.isLoading,\n          month = _state2.month,\n          year = _state2.year,\n          numDaysInMonth = _state2.numDaysInMonth,\n          isMobile = _state2.isMobile,\n          frameRef = _state2.frameRef;\n\n      if (isLoading) {\n        return _react2.default.createElement('div', null);\n      } // Patch for leap years since year value is dynamic.\n\n\n      config.numDaysInMonth = numDaysInMonth;\n      config.isMobile = isMobile;\n      return _react2.default.createElement('div', {\n        className: 'calendar-frame',\n        ref: frameRef,\n        style: {\n          height: config.height,\n          width: config.width\n        }\n      }, _react2.default.createElement(_calendar2.default, {\n        year: year,\n        month: month,\n        calendarList: calendarList,\n        config: config\n      }), _react2.default.createElement(_reactResizeDetector2.default, {\n        handleHeight: true,\n        handleWidth: true,\n        onResize: function onResize() {\n          return _this5.checkParentDimensions(frameRef);\n        },\n        refreshMode: 'debounce',\n        refreshRate: 200\n      }));\n    }\n  }]);\n\n  return Calendar;\n}(_react.Component);\n\nvar EventCalendar = exports.EventCalendar = Calendar;\nvar eventTypes = exports.eventTypes = {\n  PLACEHOLDER_TYPE: _strings.PLACEHOLDER_TYPE,\n  MULTI_DAY_TYPE: _strings.MULTI_DAY_TYPE,\n  SINGLE_DAY_TYPE: _strings.SINGLE_DAY_TYPE\n};","map":{"version":3,"sources":["/Users/joan/Documents/Drive/Projects/punithargal.org/api/frontend/node_modules/@jfschmiechen/react-event-calendar/containers/calendar.js"],"names":["Object","defineProperty","exports","value","eventTypes","EventCalendar","undefined","_createClass","defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","key","Constructor","protoProps","staticProps","prototype","_react","require","_react2","_interopRequireDefault","_moment","_moment2","_reactResizeDetector","_reactResizeDetector2","_calendar","_calendar2","_strings","_utilities","obj","__esModule","default","_classCallCheck","instance","TypeError","_possibleConstructorReturn","self","call","ReferenceError","_inherits","subClass","superClass","create","constructor","setPrototypeOf","__proto__","Calendar","_Component","_this","getPrototypeOf","state","calendarList","isLoading","month","year","numDaysInMonth","isMobile","frameRef","createRef","initCalendarList","bind","loadEvent","loadCalendarList","componentDidMount","_this2","_props","items","config","eventsCopy","JSON","parse","stringify","parseConfig","safeMonth","Date","getMonth","safeYear","getFullYear","componentWillReceiveProps","nextProps","nextContext","_this3","callBack","numDays","offset","day","numTiles","setState","events","_this4","_state","firstDateStart","firstDateEnd","secondDateStart","secondDateEnd","firstDateCreated","secondDateCreated","numDaysInLastMonth","numDaysInNextMonth","argsObject","sort","firstEvent","secondEvent","created","start","dateFormat","end","args","computeDifferences","map","event","_parseEvent","parseEvent","parsedDay","parsedEnd","parsedMonth","parsedMonthEnd","isBelowEventRange","isAboveEventRange","parts","j","Math","abs","type","MULTI_DAY_TYPE","SINGLE_DAY_TYPE","PLACEHOLDER_TYPE","reorderEvents","ranOnce","unshift","wrapLongEvent","wrappingTiles","includes","summary","date","checkParentDimensions","ref","width","current","clientWidth","height","clientHeight","render","_this5","_state2","createElement","className","style","handleHeight","handleWidth","onResize","refreshMode","refreshRate","Component"],"mappings":"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","sourcesContent":["'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.eventTypes = exports.EventCalendar = undefined;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _moment = require('moment');\n\nvar _moment2 = _interopRequireDefault(_moment);\n\nvar _reactResizeDetector = require('react-resize-detector');\n\nvar _reactResizeDetector2 = _interopRequireDefault(_reactResizeDetector);\n\nvar _calendar = require('../components/calendar');\n\nvar _calendar2 = _interopRequireDefault(_calendar);\n\nvar _strings = require('../resources/values/strings');\n\nvar _utilities = require('../resources/utilities');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar Calendar = function (_Component) {\n    _inherits(Calendar, _Component);\n\n    function Calendar(props) {\n        _classCallCheck(this, Calendar);\n\n        var _this = _possibleConstructorReturn(this, (Calendar.__proto__ || Object.getPrototypeOf(Calendar)).call(this, props));\n\n        _this.state = {\n            calendarList: null,\n            isLoading: true,\n            month: 0,\n            year: 0,\n            numDaysInMonth: 0,\n            isMobile: false,\n            frameRef: _react2.default.createRef()\n        };\n\n        _this.initCalendarList = _this.initCalendarList.bind(_this);\n        _this.loadEvent = _this.loadEvent.bind(_this);\n        _this.loadCalendarList = _this.loadCalendarList.bind(_this);\n        return _this;\n    }\n\n    /*\r\n     * Load events and config props from the parent component. Events here are copied so that when we determine the\r\n     * event type in the loadCalendarList function, we do not mutate the passed events which may have other uses in\r\n     * their program.\r\n     *\r\n     * parseConfig checks for missing data members such as colors or weekdays, and injects default values for those\r\n     * fields into the config object. This ensures calendar events will always be colored.\r\n     */\n\n\n    _createClass(Calendar, [{\n        key: 'componentDidMount',\n        value: function componentDidMount() {\n            var _this2 = this;\n\n            var _props = this.props,\n                items = _props.items,\n                config = _props.config,\n                month = _props.month,\n                year = _props.year;\n\n            // Create deep copy so that user input is not mutated.\n\n            var eventsCopy = JSON.parse(JSON.stringify(items));\n\n            // Inject defaults if key is not overwritten.\n            (0, _utilities.parseConfig)(config);\n\n            var safeMonth = month ? month : new Date().getMonth() + 1;\n            var safeYear = year ? year : new Date().getFullYear();\n\n            this.initCalendarList(safeMonth, safeYear, function () {\n                _this2.loadCalendarList(eventsCopy, safeMonth, safeYear);\n            });\n        }\n    }, {\n        key: 'componentWillReceiveProps',\n        value: function componentWillReceiveProps(nextProps, nextContext) {\n            var _this3 = this;\n\n            if ((nextProps.month !== this.props.month || nextProps.year !== this.props.year) && nextProps.items) {\n                var items = nextProps.items,\n                    config = nextProps.config,\n                    month = nextProps.month,\n                    year = nextProps.year;\n\n                // Create deep copy so that user input is not mutated.\n\n                var eventsCopy = JSON.parse(JSON.stringify(items));\n\n                // Inject defaults if key is not overwritten.\n                (0, _utilities.parseConfig)(config);\n\n                var safeMonth = month ? month : new Date().getMonth() + 1;\n                var safeYear = year ? year : new Date().getFullYear();\n\n                this.initCalendarList(safeMonth, safeYear, function () {\n                    _this3.loadCalendarList(eventsCopy, safeMonth, safeYear);\n                });\n            }\n        }\n\n        /*\r\n         * Initialize empty calendar list of a given length. This step is important because it allows us to use unshift\r\n         * functions to load our events without worrying about the calendar index being undefined.\r\n         *\r\n         * This is the starting point of the calendar, and everything flows from here.\r\n         * initCalendarList -> loadCalendarList -> loadEvent -> calendarList passed to presentational components and displayed.\r\n         *\r\n         * @param callBack: This callBack is the loadCalendarList function. Once the calendar has been initialized,\r\n         *                  we can begin loading it.\r\n         */\n\n    }, {\n        key: 'initCalendarList',\n        value: function initCalendarList(month, year, callBack) {\n            var numDaysInMonth = [31, year % 4 === 0 ? 29 : 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31];\n            var calendarList = [];\n\n            var numDays = numDaysInMonth[month - 1];\n            var offset = (0, _moment2.default)(year + '-' + month + '-01', 'YYYY-M-DD').day();\n            var numTiles = offset + numDays > 35 ? 35 + 7 : 35;\n\n            for (var i = 0; i < numTiles; i++) {\n                calendarList[i] = [];\n            }\n\n            this.setState({ calendarList: calendarList, numDaysInMonth: numDaysInMonth }, function () {\n                return callBack();\n            });\n        }\n\n        /* Sort and iterate over copied events, assigning types and determining their place on the calendar.\r\n         * numDays, offset, and most of the variables below are used to calculate the event's position from it's start\r\n         * and end dates.\r\n         */\n\n    }, {\n        key: 'loadCalendarList',\n        value: function loadCalendarList(events, month, year) {\n            var _this4 = this;\n\n            // Six weeks, four weeks = selected month, one week for months before and after - 42 days total.\n            // Group events on the same day, each element in array represents one day.\n            var _state = this.state,\n                calendarList = _state.calendarList,\n                numDaysInMonth = _state.numDaysInMonth;\n            var config = this.props.config;\n\n\n            if (!config) return null;\n\n            var firstDateStart = null,\n                firstDateEnd = null;\n            var secondDateStart = null,\n                secondDateEnd = null;\n            var firstDateCreated = null,\n                secondDateCreated = null;\n\n            var numDays = numDaysInMonth[month - 1];\n            var numDaysInLastMonth = numDaysInMonth[month - 2 >= 0 ? month - 2 : 11];\n            var numDaysInNextMonth = numDaysInMonth[month > 11 ? 0 : month];\n            var offset = (0, _moment2.default)(year + '-' + month + '-01', \"YYYY-M-DD\").day();\n            var numTiles = offset + numDays > 35 ? 35 + 7 : 35;\n\n            var argsObject = { numDays: numDays, numDaysInMonth: numDaysInMonth, numDaysInLastMonth: numDaysInLastMonth, numDaysInNextMonth: numDaysInNextMonth, offset: offset, month: month, year: year, numTiles: numTiles };\n\n            events.sort(function (firstEvent, secondEvent) {\n\n                firstDateCreated = (0, _moment2.default)(firstEvent.created);\n                secondDateCreated = (0, _moment2.default)(secondEvent.created);\n\n                firstDateStart = (0, _moment2.default)(firstEvent.start, config.dateFormat);\n                firstDateEnd = (0, _moment2.default)(firstEvent.end, config.dateFormat);\n\n                secondDateStart = (0, _moment2.default)(secondEvent.start, config.dateFormat);\n                secondDateEnd = (0, _moment2.default)(secondEvent.end, config.dateFormat);\n\n                var args = {\n                    firstDateStart: firstDateStart,\n                    firstDateEnd: firstDateEnd,\n                    secondDateStart: secondDateStart,\n                    secondDateEnd: secondDateEnd,\n                    month: month,\n                    numDaysInMonth: numDaysInMonth\n                };\n\n                return (0, _utilities.computeDifferences)(firstDateCreated, secondDateCreated, firstEvent, secondEvent, args);\n            });\n\n            events.map(function (event) {\n                var _parseEvent = (0, _utilities.parseEvent)(event, argsObject, config),\n                    parsedDay = _parseEvent.parsedDay,\n                    parsedEnd = _parseEvent.parsedEnd,\n                    parsedMonth = _parseEvent.parsedMonth,\n                    parsedMonthEnd = _parseEvent.parsedMonthEnd,\n                    isBelowEventRange = _parseEvent.isBelowEventRange,\n                    isAboveEventRange = _parseEvent.isAboveEventRange;\n\n                var parts = {\n                    numTiles: numTiles,\n                    parsedDay: parsedDay,\n                    parsedEnd: parsedEnd,\n                    offset: offset,\n                    month: month,\n                    numDaysInLastMonth: numDaysInLastMonth,\n                    numDays: numDays\n                };\n\n                if (!isBelowEventRange || !isAboveEventRange) {\n                    for (var i = parsedDay, j = 0; i < parsedEnd; i++, j++) {\n                        switch (true) {\n                            // Event is multiple days long\n                            case Math.abs(parsedEnd - parsedDay) > 1:\n                                event.type = _strings.MULTI_DAY_TYPE;\n                                break;\n\n                            // Event takes place over a single day\n                            case parsedMonth === parsedMonthEnd ? Math.abs(parsedEnd - parsedDay) <= 1 : Math.abs(parsedEnd - parsedDay - parsedDay) <= 1:\n                                event.type = _strings.SINGLE_DAY_TYPE;\n                                break;\n\n                            // If event reaches here, there is likely something wrong with its structure.\n                            // Set it as a placeholder so it is less likely to disrupt other events.\n                            default:\n                                event.type = _strings.PLACEHOLDER_TYPE;\n                                break;\n                        }\n\n                        switch (true) {\n                            // Event belongs to 'this' month\n                            case parsedMonth === month:\n                                _this4.loadEvent(event, calendarList, i + offset - 1, parts, j);\n                                break;\n\n                            // Event belongs to previous month\n                            case parsedMonth === (month - 1 >= 1 ? month - 1 : 12):\n                                _this4.loadEvent(event, calendarList, i - numDaysInLastMonth + offset - 1, parts, j);\n                                break;\n\n                            // Event belongs to next month\n                            default:\n                                _this4.loadEvent(event, calendarList, numDays + i + offset - 1, parts, j);\n                                break;\n                        }\n                    }\n                }\n\n                return 0; // Get rid of warning\n            });\n\n            // Perform second pass to reorder placeholder events so that space can be saved.\n            (0, _utilities.reorderEvents)({ calendarList: calendarList, numDays: numDays, numDaysInMonth: numDaysInMonth, numDaysInLastMonth: numDaysInLastMonth, numDaysInNextMonth: numDaysInNextMonth, offset: offset, month: month, year: year, numTiles: numTiles, config: config });\n\n            this.setState({ calendarList: calendarList, isLoading: false, month: month, year: year });\n        }\n\n        /* Place event into appropriate spot on calendar, check for vertical overflow, and wrap events that extend past\r\n         * calendar border.\r\n         *\r\n         * This is the last step before the calendarList is passed to the presentational components.\r\n         */\n\n    }, {\n        key: 'loadEvent',\n        value: function loadEvent(event, calendarList, i, parts, j) {\n            var config = this.props.config;\n            var parsedEnd = parts.parsedEnd,\n                numTiles = parts.numTiles;\n\n            var ranOnce = false;\n            if (i >= 0 && i < numTiles && j === 0) {\n                calendarList[i].unshift(event);\n\n                (0, _utilities.wrapLongEvent)(event, ranOnce, calendarList, parts, i, event, config);\n            } else {\n                var start = (0, _moment2.default)(event.start, config.dateFormat);\n                var end = (0, _moment2.default)(event.end, config.dateFormat);\n\n                if (i >= 0 && i < numTiles) {\n                    if (!_strings.wrappingTiles.includes(i - 1)) {\n                        calendarList[i].unshift({\n                            summary: event.summary,\n                            created: event.created,\n                            type: _strings.PLACEHOLDER_TYPE,\n                            start: { date: start.year() + '-' + (start.month() + 1) + '-' + parsedEnd },\n                            end: { date: end.year() + '-' + (end.month() + 1) + '-' + parsedEnd }\n                        });\n                    }\n                }\n            }\n        }\n\n        /* Calendar will shrink into mobile mode when the calendar's container is below a certain height or width.\r\n         * Width and height values are determined to be the lowest values possible and still retain calendar integrity.\r\n         */\n\n    }, {\n        key: 'checkParentDimensions',\n        value: function checkParentDimensions(ref) {\n            var width = ref.current.clientWidth;\n            var height = ref.current.clientHeight;\n\n            if (width < 451 || height < 521) {\n                this.setState({\n                    isMobile: true\n                });\n            } else {\n                this.setState({\n                    isMobile: false\n                });\n            }\n        }\n    }, {\n        key: 'render',\n        value: function render() {\n            var _this5 = this;\n\n            var config = this.props.config;\n            var _state2 = this.state,\n                calendarList = _state2.calendarList,\n                isLoading = _state2.isLoading,\n                month = _state2.month,\n                year = _state2.year,\n                numDaysInMonth = _state2.numDaysInMonth,\n                isMobile = _state2.isMobile,\n                frameRef = _state2.frameRef;\n\n\n            if (isLoading) {\n                return _react2.default.createElement('div', null);\n            }\n\n            // Patch for leap years since year value is dynamic.\n            config.numDaysInMonth = numDaysInMonth;\n            config.isMobile = isMobile;\n\n            return _react2.default.createElement(\n                'div',\n                { className: 'calendar-frame', ref: frameRef, style: { height: config.height, width: config.width } },\n                _react2.default.createElement(_calendar2.default, { year: year, month: month, calendarList: calendarList, config: config }),\n                _react2.default.createElement(_reactResizeDetector2.default, {\n                    handleHeight: true,\n                    handleWidth: true,\n                    onResize: function onResize() {\n                        return _this5.checkParentDimensions(frameRef);\n                    },\n                    refreshMode: 'debounce',\n                    refreshRate: 200\n                })\n            );\n        }\n    }]);\n\n    return Calendar;\n}(_react.Component);\n\nvar EventCalendar = exports.EventCalendar = Calendar;\nvar eventTypes = exports.eventTypes = { PLACEHOLDER_TYPE: _strings.PLACEHOLDER_TYPE, MULTI_DAY_TYPE: _strings.MULTI_DAY_TYPE, SINGLE_DAY_TYPE: _strings.SINGLE_DAY_TYPE };\n"]},"metadata":{},"sourceType":"script"}